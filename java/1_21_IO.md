# Vol.21

## 21.1、 IO对象序列化

- ObjectInputStream ：读取，将堆内存对象存到硬盘中，进行持久化存储。
    - 写入之后，是一个二进制文件

- ObjectOutputStream ：输出

——————————————————————————————————————————      

```java
import java.io.*;

/*
    要让Person对象可以进行写入，需要Person去实现Serializable接口

    因为需要有一个唯一的标识，从而可以以某种对象进行二进制的读取写入
 */
class Person implements Serializable
{
    // serialVersionUID可以自己设置，也可以用系统默认的
    public static final long serialVersionUID = 42L;

    private String name;
    // transient修饰的成员，不会被序列化，也就是不会作为标识的参考依据。
    transient int age;
    static String country = "cn";
    Person(String name , int age, String country){
        this.name = name;
        this.age = age;
		this.country = country;
    }
    public String toString(){
		return name+":"+age+":"+country;
	}
}


class ObjectStreamDemo{
    public static void main(String[] args)throws Exception{
        writeObj();

        rendObj();
    }
    /*
        从文件中读取Person对象
     */
    public static void readObj()throws Exception{
        FileInputStream fis = new FileInputStream("obj.txt");
        ObjectInputStream ois = new ObjectInputStream(fis);

        Person p = (Person)ois.readObject();

        System.out.println(p);
        ois.close();
    }

    /*
        将Person对象写入到文件中
     */
    public static void writeObj()throws IOException{
        FineOutputStream fos = new FileOutputStream("obj.txt");
        ObjectOutputStream oos = new ObjectOutputStream(fos);

        oos.writeObject(new Person("xxx",100,"aa"));

        oos.close();
    }
}
```
——————————————————————————————————————————      

## 21.2、管道流

用于多线程，一个线程读，一个线程写。

- PipeinputStream
- PipeOutputStream

——————————————————————————————————————————      

## 21.3、RandomAccessFile 随机访问文件

随机访问文件不是IO体系中的子类，它直接继承Object。

但是它是IO包的成员，
其内部封装了字节的输入流、字节输出流。

```java
/*
    有几种模式，只读r，读写rw
    r模式，不会创建文件，会去读取一个已存在的文件，如果文件不存在，异常。
    rw，如果操作的文件不存在，会自动创建，如果存在则在文件末尾写入
 */
RandomAccessFile raf = new RandomAccessFile("ran.txt","r");

// 获取指针位置
raf.getFilePointer();

// 调整对象中的指针位置
raf.seek(8*1);

```

