# Vol.23

## 23.1、 OSI模型

- OSI模型
- TCP/IP模型

没啥好讲的，跟计算机网络里面写的一样。

——————————————————————————————————————————      

## 23.2、java.net

> Thinkpad- s1400

- Inet4Address

- Inet6Address

```java
InetAddress i = InetAddress.getLocalHost();
InetAddress ia = InetAddress.getByName("192.168.22.22");

// i和ia都是一个地址对象。
```
——————————————————————————————————————————      

## 23.3、UDP/TCP

没啥好讲的，跟计算机网络里面写的一样。

——————————————————————————————————————————      

## 23.4、Socket编程

网络通信 → 实际就是Socket编程

——————————————————————————————————————————      

## 23.5、UDP

DatagramSocket  

1、发送数据
```java
// 1、创建UDP服务，发送端口8888
DatagramSocket ds = new DatagramSocket(8888);
byte[] buf = "AAAA".getBytes();

// 2、封装数据包，目的地接收端口10000
DatagramPacket dp = new DatagramPacket(
    buf, 
    buf.length, 
    InetAddress.getByName("192.168.1.254"), // 目的地址
    10000   // 目的端口
)

// 3、发出数据包
ds.send(dp);
// 4、关闭资源
ds.close();
```
——————————————————————————————————————————      

2、接收数据
```java
// 1、创建监听，端口号10000
DatagramSocket ds = new DatagramSocket(10000);

// 这里的while，是为了能够一直监听。
while(true){
    // 2、创建容器，用于存放数据
    byte[] buf = new byte[1024];
    DatagramPacket dp = new DatagramPacket(buf, buf.length);

    // 3、等待网络中接收到数据，将其存入dp中
    ds.receive(dp);

    // 4、收到数据后，对数据进行处理
    String ip = dp.getAddress().getHostAddress();
    String data = new String(dp.getData(), 0, dp.getLength());

    int port = dp.getPort();
}

// 5、关闭资源
ds.close();
```
——————————————————————————————————————————      

> cmd命令 start ，可以开启一个新的cmd窗口

——————————————————————————————————————————      

## 23.6、ServerSocket 服务端

- ServerSocket 服务端

- Socket 客户端

1、客户端，创建一个Socket服务
```java
// 1、创建一个Socket服务，端口号10003
Socket s = new Socket("192.168.1.254", 10003);

// 2、为了发送数据，获取socket中的输出流
OutputStream out = s.getOutputStream();

// 3、向输出流中写入数据，此时会发出数据
out.write("AAA".getBytes());

s.close();
```
——————————————————————————————————————————      

2、服务端
```java
// 1、创建一个ServerSocket，端口号10003
ServerSocket ss = new ServerSocket(10003);

while(true){
    // 2、等待接收网络上收到的数据
    Socket s = ss.accept();

    // 3、处理收到的数据
    String ip = s.getInetAddress().getHostAddress();
    System.out.println(ip + " is connected");

    InputStream in = s.getInputStream();

    byte[] buf = new byte[1024];
    int len = in.read(buf);

    System.out.println(new String(buf, 0, len));
    s.close();
}
```
——————————————————————————————————————————      