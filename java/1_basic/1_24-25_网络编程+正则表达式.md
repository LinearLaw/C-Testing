# Vol.24 （有一点点要补充）

## 24.1、 上传图片

```java
import java.io.*;
import java.net.*;

class PicClient{
    public static void main(String[] args)throws Exception{
        Socket s = new Socket("192.168.1.254",10007);
        FileInputStream fis = new FileInputStream("1.bmp");

        OutputStream out = s.getOutputStream();
        byte[] buf = new byte[1024];

        int len = 0;

        while((len=fis.read(buf))!=-1){
            out.write(buf,0,len);
        }

        // 终止输出，从而告知服务端数据已写完
        s.shutdownOutput();

        InputStream in = s.getInputStream();
        byte[] bufIn = new byte[1024];
        int num = in.read(bufIn);

        System.out.println(new String(bufIn,0,num));

        fis.close();
        s.close();
    }
}

class PicServer{
    public static void main(String[] args)throws Exception{
        ServerSocket ss = new ServerSocket(10007);

        Socket s = ss.accept();
        InputStream in = s.getInputStream();

        FileOutputStream fos = new FileOutputStream("server.bmp");
        byte[] buf = new byte[1024];

        int len = 0;
        while((len=in.read(buf)) != -1){
            fos.write(buf,0,len);        
        }

        OutputStream out = s.getOutputStream();
        out.write("上传成功".getBytes());

        fos.close();
        s.close();
        ss.close();
    }
}
```

```java
// 第二参数，是连接到服务器的最大连接数
ServerSocket ss = new ServerSocket(10007,50);

```
——————————————————————————————————————————      

## 24.2、URL
```java
URL url = new URL("http://192.168.1.254?a=12414");
url.getFile();

url.getHost();

url.getPath();

url.getPort();

url.getProtocol();

url.getQuery();
```
——————————————————————————————————————————      

## 24.3、DNS解析

——————————————————————————————————————————      


# Vol.25、正则表达式

## 25.1、匹配

str.matches(regExp)

例如：
- [bcd] 匹配bcd中的其中一个字符

- 1[1-9]\d{9}
    - 1 ： 匹配的组1，匹配字符"1"
    - [1-9] ：匹配的组2，匹配1-9的数字
    - \d{9} ：匹配的组3，匹配9个数字

——————————————————————————————————————————      

数量词
- ? ：最多一次
- \* ： 0次或多次
- \+ ：至少一次
- {n} 
- {n,}
- {n,m}
——————————————————————————————————————————      

## 25.2、获取

将字符串中符合规则的子串取出

```java
String str = "aabbcc";
String reg = "\\b[a-z]{4}";

Pattern p = Pattern.compile(reg);
Matcher m = p.matcher(str);

m.matches();    // 返回true或false
```
——————————————————————————————————————————      

## 25.3、切割

str.split()，里面传入一个分隔符，也可以传入一个正则表达式。

```java
// 例如，aabbbccddddcsb
str.split("(.)\\1+");   // 将重复的字符切割
```
——————————————————————————————————————————      

- m.matches() 返回true false

- m.group() 用之前用m.find()

- m.find() 找到下一个匹配的字符串，返回true或false
——————————————————————————————————————————      

> Tips：    
> m.find()和m.group用法和迭代器差不多。     

——————————————————————————————————————————      

子串的前后下标
- m.start();   
- m.end();

——————————————————————————————————————————      